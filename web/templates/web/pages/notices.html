{% extends 'web/pages/basic.html' %}
{% load static %}
{% load mytags %}

{% block content %}
    <div class="col">
        <div class="card card-middle">
            <div class="content title text-center">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
            <hr class="mt-normal">

            {% get_notice_code_list as notice_codes %}

            {% if notices %}
                {% for notice in notices %}
                    <div class="row ph-normal pv-normal">
                        {% if notice.image_url %}
                            <div class="icon-medium-round">
                                <img src="{{ notice.image_url }}" alt="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ">
                            </div>
                        {% else %}
                            <div class="icon-medium color-secondary">{% include notice.image_name %}</div>
                        {% endif %}

                        <div class="row ml-normal w-100">
                            <div class="col">
                                <div class="mr-medium">

                                    <!-- –î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π -->

                                    {% if notice.code == notice_codes.ADDED_USER_FOR_VERIFICATION %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é.


                                    {% elif notice.code == notice_codes.FEEDBACK_LEFT %}
                                        {% if notice.student_group_name %}
                                            –û—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ —Å –≥—Ä—É–ø–ø—ã <b>{{ notice.student_group_name }}</b>
                                            –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:<br>
                                        {% else %}
                                            –û—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:<br>
                                        {% endif %}
                                        <i>{{ notice.feedback_text|truncatechars:255 }}</i>


                                    {% elif notice.code == notice_codes.NEED_ISSUE_BADGE_FOR_ACHIEVEMENT %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ <b>{{ notice.achievement_name }}</b>
                                        {{ notice.achievement_level }} —É—Ä. —Ä–∞–Ω–≥–∞
                                        <b class="{% get_rank_css_class notice.achievement_rank_code %}">
                                            {% get_rank_name notice.achievement_rank_code %}</b>,
                                        –∑–∞ –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –≤—ã–¥–∞—Ç—å –∑–Ω–∞—á–æ–∫.


                                    {% elif notice.code == notice_codes.UPDATE_PROJECT_NAME %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –∏–∑–º–µ–Ω–∏–ª —Ç–µ–º—É —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ <b>{{ notice.project_name }}</b>.
                                        –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—à–µ–ª –Ω–∞ —Å—Ç–∞–¥–∏—é —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.


                                    {% elif notice.code == notice_codes.TASK_COMMENT_LEFT %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –æ—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–¥–∞—á–µ
                                        <a class="link" href="{% url 'task' notice.task_id %}">
                                            {{ notice.task_name }}</a>.


                                    {% elif notice.code == notice_codes.TEST_COMMENT_LEFT %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –æ—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
                                        <a class="link" href="{% url 'test' notice.test_id %}">
                                            {{ notice.test_name }}</a>.



                                    <!-- –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ª–∏—á–Ω—ã–µ -->

                                    {% elif notice.code == notice_codes.USER_VERIFIED %}
                                        –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω.
                                        –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.


                                    {% elif notice.code == notice_codes.HAPPY_BIRTHDAY %}
                                        {{ request.user.first_name }}, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å <b>–¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è</b>! üéâ
                                        –ñ–µ–ª–∞—é —Ç–µ–±–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö —Ü–µ–ª–µ–π –∏ —Å—Ç–∞—Ç—å –ª—É—á—à–∏–º –≤ —Å–≤–æ–µ–º –¥–µ–ª–µ üòâ
                                        üéâüéÇ‚ú®üç∞ü•≥üéà


                                    {% elif notice.code == notice_codes.NEW_LEVEL %}
                                        –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ <b>{{ notice.level }} —É—Ä.</b>!


                                    {% elif notice.code == notice_codes.UPDATE_PROJECT_STATUS %}
                                        –°—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ
                                        <a class="link" href="{% url 'project' notice.project_id %}">–ø—Ä–æ–µ–∫—Ç–∞</a>
                                        –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω –Ω–∞
                                        <b class="{% get_project_status_css_class notice.project_status_code %}">
                                            {% get_project_status_name notice.project_status_code %}</b>.


                                    {% elif notice.code == notice_codes.ACHIEVEMENT_RECEIVED %}
                                        –í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
                                        {% if notice.achievement_level %}
                                            <a class="link" href="{% url 'achievements' %}">
                                                {{ notice.achievement_name }}</a>
                                            {{ notice.achievement_level }} —É—Ä.
                                        {% else %}
                                            <a class="link" href="{% url 'achievements' %}">
                                                {{ notice.achievement_name }}</a>
                                        {% endif %}
                                        —Ä–∞–Ω–≥–∞
                                        <b class="{% get_rank_css_class notice.achievement_rank_code %}">
                                            {% get_rank_name notice.achievement_rank_code %}</b>.


                                    {% elif notice.code == notice_codes.UPDATE_RANK %}
                                        –í—ã—à —Ä–∞–Ω–≥ –±—ã–ª –ø–æ–≤—ã—à–µ–Ω –¥–æ
                                        <b>{{ notice.rank_name }}</b>.


                                    {% elif notice.code == notice_codes.UPDATE_COMPLETING_TASK_STATUS %}
                                        –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
                                        <a class="link" href="{% url 'task' notice.task_id %}">
                                            {{ notice.task_name }}</a>
                                        –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω –Ω–∞
                                        <b class="{% get_task_status_css_class notice.task_status_code %}">
                                            {% get_task_status_name notice.task_status_code %}</b>.


                                    {% elif notice.code == notice_codes.ADDITIONAL_POINTS_RECEIVED %}
                                        –í—ã –ø–æ–ª—É—á–∏–ª–∏
                                        <b>{{ notice.points }} –±–∞–ª–ª.</b>{% if notice.comment %}:
                                            {{ notice.comment }}.
                                        {% endif %}


                                    {% elif notice.code == notice_codes.PROJECT_COMMENT_LEFT %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}</a>
                                        –æ—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É.


                                    {% elif notice.code == notice_codes.COMPLETING_TASK_COMMENT_LEFT %}
                                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        <a class="link" href="{% url 'user' notice.username %}">
                                            {{ notice.user_full_name }}
                                        </a>
                                        –æ—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤–∞—à–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
                                        <a class="link" href="{% url 'task' notice.task_id %}">
                                            {{ notice.task_name }}</a>.




                                    <!-- –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≥—Ä—É–ø–ø–æ–≤—ã–µ -->

                                    {% elif notice.code == notice_codes.POST_ADDED %}
                                        –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –ø–æ—Å—Ç
                                        <a class="link" href="{% url 'post' notice.post_id %}">
                                            {{ notice.post_header }}</a>.


                                    {% elif notice.code == notice_codes.ASSIGNED_EVENT %}
                                        –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
                                        <a class="link" href="{% url 'event' notice.event_id %}">
                                            {{ notice.event_name }}</a>.


                                    {% elif notice.code == notice_codes.ASSIGNED_TASK %}
                                        –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
                                        <a class="link" href="{% url 'task' notice.task_id %}">
                                            {{ notice.task_name }}</a>
                                        –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ <b>{{ notice.task_section_name }}</b>.


                                    {% elif notice.code == notice_codes.ASSIGNED_TEST %}
                                        –ù–∞–∑–Ω–∞—á–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                                        <a class="link" href="{% url 'test' notice.test_id %}">
                                            {{ notice.test_name }}</a>.


                                    {% elif notice.code == notice_codes.UPDATE_TEST_OPEN_STATUS %}
                                         –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                                        <a class="link" href="{% url 'test' notice.test_id %}">
                                            {{ notice.test_name }}</a>
                                        {% if notice.test_is_open %} –æ—Ç–∫—Ä—ã—Ç–æ. {% else %} –∑–∞–∫—Ä—ã—Ç–æ. {% endif %}


                                    {% elif notice.code == notice_codes.UPDATE_TEST_RESULTS_STATUS %}
                                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                                        <a class="link" href="{% url 'test' notice.test_id %}">
                                            {{ notice.test_name }}</a>
                                        {% if notice.test_open_results %} –æ—Ç–∫—Ä—ã—Ç—ã. {% else %} –∑–∞–∫—Ä—ã—Ç—ã. {% endif %}

                                    {% endif %}

                                </div>
                                <div class="fs-small color-secondary mt-small">
                                    {% datetime notice.datetime_create %}
                                </div>
                            </div>

                            {% if not notice.is_read %}
                                <div class="right">
                                    <form action="{% url 'notices' %}" method="post">
                                        {% csrf_token %}
                                        <button class="button button-primary" type="submit" name="read" value="{{ notice.id }}">
                                            –ü—Ä–æ—á–∏—Ç–∞—Ç—å
                                        </button>
                                    </form>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <hr>
                {% endfor %}

                {% pagination notices page url_name="notices" %}

            {% else %}
                <div class="content message-secondary mt-normal">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç</div>
            {% endif %}
        </div>
    </div>

    <div class="col">
        <div class="card card-right">
            <div class="content title text-center">–î–µ–π—Å—Ç–≤–∏—è</div>
            <hr class="mv-normal">

            <div class="content row">
                <div class="h-center">
                    <form action="{% url 'notices' %}" method="post">
                        {% csrf_token %}
                        <button class="button button-primary" type="submit" name="read" value="all">
                            –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </div>

{% endblock %}
